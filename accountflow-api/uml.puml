@startuml UML - AccountFlow

title UML - AccountFlow
header Grupo 04 | October 23, 2025

' Configuração para layout ortogonal (linhas retas)
skinparam linetype ortho

' ===================================
' CLASSES
' ===================================
package "backend.models" {

class Address {
    uuid: UUID
    zip_code: String
    street: String
    number: String
    complement: String
    neighborhood: String
    city: String
    state: String
}

class Company {
    uuid: UUID
    CNPJ: String
    fantasy_name: String
    social_reason: String
    opening_date: Date
    logo: String
    cnae: String
    address: Address
    type_of: ENUM ['Client', 'Supplier', 'Both']
    email: String
    phone: String
}

class BillingPlan {
    uuid: UUID
    name: String
    description: String
}

class BillingAccount {
    uuid: UUID
    nome: String
    account_type: TextChoices['analytic', 'synthetic']
    classification: Integer
    code: String
    is_active: Boolean
    company: Company
    billingPlan: BillingPlan
    parent: BillingAccount
}

class Preset {
    uuid: UUID
    name: String
    description: String
    payable_billingAccount: BillingAccount
    receivable_billingAccount: BillingAccount
    has_transitory_account: Boolean
    transitory_billingAccount: BillingAccount
}

class Title {
    uuid: UUID
    description: String
    amount: Decimal
    active: Boolean
    recorrence: Boolean
    expiration_date: Date
    recorrence_period: ENUM ['daily', 'weekly', 'monthly', 'yearly']
    installments: Integer
    preset: Preset
    fees_percentage_monthly: Decimal
}

class Entry {
    uuid: UUID
    title: Title
    description: String
    type_of: ENUM ['Income', 'Expense']
    amount: Decimal
    paid_at: Date (readonly)
    date_expirations: Date (readonly cadastrado automaticamente pela recorrencia)
    payment_method: ENUM ['Cash', 'Credit Card', 'Debit Card', 'Bank Transfer', 'Pix']
    status: ENUM ['Pending', 'Paid', 'Overdue']
}

}
Company "1" -- "1" Address
Company "1" -- "1" BillingAccount : company
BillingPlan "1" -- "0..*" BillingAccount
BillingAccount "1" -- "0..*" BillingAccount : parent
BillingAccount "1" -- "0..*" Title : payable/receivable
Title "1" -- "0..*" Entry

Preset "1" -- "0..*" Title